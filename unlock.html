<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Unlock Our Secret</title>
<style>
  :root{
    --accent:#e75480;
    --bg1:#fff2f5;
    --card:#ffffff;
  }
  html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Quicksand",sans-serif;background:linear-gradient(135deg,#ffe8ec,#fff5f7);color:#222}
  .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px}
  .card{
    width:100%;max-width:460px;background:var(--card);border-radius:16px;padding:22px 20px 26px;box-shadow:0 18px 50px rgba(231,84,128,0.12);position:relative;
  }
  h1{margin:0 0 6px;font-size:1.45rem;color:var(--accent);text-align:center}
  p.lead{margin:0 0 18px;color:#5a3e3e;text-align:center;font-size:0.95rem}
  .step{
    margin-top:12px;display:flex;flex-direction:column;gap:8px;transition:all .28s ease;
  }
  label{font-weight:600;color:#5a3e3e;font-size:0.9rem}
  .input{
    display:flex;gap:10px;align-items:center;
  }
  input.date-input{
    width:100%;padding:12px 14px;border-radius:12px;border:1px solid rgba(0,0,0,0.06);background:#fff;color:#111;font-size:1rem;box-shadow:0 6px 18px rgba(0,0,0,0.04);text-align:center;outline:none;
  }
  input.date-input:focus{box-shadow:0 10px 28px rgba(231,84,128,0.12);border-color:rgba(231,84,128,0.18)}
  .err{color:#b00020;background:linear-gradient(180deg, rgba(184,37,68,0.06), rgba(184,37,68,0.02));padding:8px;border-radius:10px;font-size:0.88rem;display:none}
  .hint-btn{display:none;margin-top:10px;padding:10px;border-radius:10px;border:none;background:#fff;color:var(--accent);font-weight:700;cursor:pointer}
  .controls{display:flex;gap:10px;justify-content:space-between;align-items:center;margin-top:14px}
  .btn-primary{flex:1;padding:12px;border-radius:12px;border:none;background:var(--accent);color:#fff;font-weight:800;cursor:pointer}
  .btn-ghost{padding:10px 12px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);background:#fff;color:#444;cursor:pointer}
  .subtle{font-size:0.85rem;color:#666;text-align:center;margin-top:10px}
  .small{font-size:0.85rem;color:#666}
  /* modal */
  .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.55);z-index:1000;padding:20px}
  .modal.show{display:flex}
  .modal-card{background:#fff;width:100%;max-width:480px;border-radius:12px;padding:18px;box-shadow:0 18px 60px rgba(0,0,0,0.25);color:#222}
  .modal-card h3{margin:0 0 6px}
  .modal-card .hint{margin-top:10px;font-weight:700;color:var(--accent)}
  .modal-card input{width:100%;padding:10px;border-radius:8px;border:1px solid #ddd;margin-top:8px}
  .modal-card button{margin-top:12px;padding:10px;border-radius:8px;border:none;background:var(--accent);color:#fff;font-weight:700;cursor:pointer;width:100%}
  .modal-card .close{margin-top:8px;background:#fff;border:1px solid #ddd;color:#444}
  /* success overlay */
  .success{position:absolute;inset:0;border-radius:16px;background:linear-gradient(180deg, rgba(231,84,128,0.06), rgba(231,84,128,0.02));display:flex;align-items:center;justify-content:center;flex-direction:column;gap:8px}
  .success h2{color:var(--accent);margin:0}
  /* responsive */
  @media (max-width:420px){ .card{padding:18px} .btn-primary{padding:10px} }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main" aria-labelledby="title">
      <h1 id="title">üîê Unlock Our Secret</h1>
      <p class="lead">Enter the three dates we remember together. Questions will appear one by one ‚Äî only after the previous is correct. If you need a hint, answer a small question first.</p>

      <!-- STEP container -->
      <div id="steps">
        <!-- Step 1 -->
        <div class="step" id="step-anniversary" data-step="1" aria-hidden="false">
          <label for="anniversary">Our Anniversary üíç</label>
          <div class="input">
            <input id="anniversary" class="date-input" placeholder="dd/mm/yyyy" inputmode="numeric" maxlength="10" autocomplete="off" />
          </div>
          <div id="errAnn" class="err">Error</div>
        </div>

        <!-- Step 2 (hidden initially) -->
        <div class="step" id="step-kiss" data-step="2" aria-hidden="true" style="display:none;opacity:0;transform:translateY(8px)">
          <label for="kiss">Our First Kiss üíã</label>
          <div class="input">
            <input id="kiss" class="date-input" placeholder="dd/mm/yyyy" inputmode="numeric" maxlength="10" autocomplete="off" />
          </div>
          <div id="errKiss" class="err">Error</div>
        </div>

        <!-- Step 3 (hidden initially) -->
        <div class="step" id="step-hug" data-step="3" aria-hidden="true" style="display:none;opacity:0;transform:translateY(8px)">
          <label for="hug">Our First Hug ü§ó</label>
          <div class="input">
            <input id="hug" class="date-input" placeholder="dd/mm/yyyy" inputmode="numeric" maxlength="10" autocomplete="off" />
          </div>
          <div id="errHug" class="err">Error</div>
        </div>

      </div>

      <div style="display:flex;gap:10px;align-items:center;justify-content:space-between;margin-top:16px">
        <button id="hintBtn" class="hint-btn" aria-hidden="true">Need a hint? üëÄ</button>
        <div style="flex:1"></div>
        <div class="controls">
          <button id="backBtn" class="btn-ghost" style="display:none">Back</button>
          <button id="nextBtn" class="btn-primary">Next</button>
        </div>
      </div>

      <div class="subtle">Tip: You can type digits only ‚Äî slashes will appear automatically.</div>
    </div>
  </div>

  <!-- Modal for hint prompts -->
  <div class="modal" id="hintModal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true">
      <h3 id="hintTitle">Answer to get a hint</h3>
      <div id="hintPrompt" class="small">Question ...</div>
      <input id="hintInput" placeholder="Write your answer..." />
      <button id="hintSubmit">Submit & Show Hint</button>
      <button id="hintClose" class="close" style="width:100%;padding:10px;border-radius:8px;">Close</button>
      <div id="hintReveal" class="hint" style="display:none;margin-top:12px"></div>
    </div>
  </div>

<script>
/* ===== CONFIG: correct dates as digits ddmmyyyy ===== */
const CORRECT = {
  anniversary: '11062025',
  kiss:        '29072024',
  hug:         '19022024'
};

/* ===== Hint prompts and reveals per step ===== */
const HINTS = {
  anniversary: {
    prompt: "What is one thing that I have done that made you the happiest?",
    reveal: "Hint: Check your diary entries üòâ",
    storageKey: 'hint_anniversary'
  },
  kiss: {
    prompt: "What is one habit of mine that you really love?",
    reveal: "Hint: It‚Äôs in one of those late-night convos üòå",
    storageKey: 'hint_kiss'
  },
  hug: {
    prompt: "What is one thing I do that turns you on the most?",
    reveal: "Hint: It's hidden somewhere in our chat üí¨",
    storageKey: 'hint_hug'
  }
};

/* ===== helpers ===== */
const digitsOnly = s => (s||'').replace(/\D/g,'').slice(0,8);
function formatDDMMYYYY(digits){
  const r = digitsOnly(digits);
  if(!r) return '';
  const dd = r.slice(0,2);
  const mm = r.slice(2,4);
  const yyyy = r.slice(4,8);
  if(r.length <= 2) return dd;
  if(r.length <= 4) return dd + '/' + mm;
  return dd + '/' + mm + '/' + yyyy;
}

/* ===== DOM refs ===== */
const stepAnn = document.getElementById('step-anniversary');
const stepKiss = document.getElementById('step-kiss');
const stepHug = document.getElementById('step-hug');
const inputAnn = document.getElementById('anniversary');
const inputKiss = document.getElementById('kiss');
const inputHug = document.getElementById('hug');
const errAnn = document.getElementById('errAnn');
const errKiss = document.getElementById('errKiss');
const errHug = document.getElementById('errHug');
const nextBtn = document.getElementById('nextBtn');
const backBtn = document.getElementById('backBtn');
const hintBtn = document.getElementById('hintBtn');
const hintModal = document.getElementById('hintModal');
const hintTitle = document.getElementById('hintTitle');
const hintPrompt = document.getElementById('hintPrompt');
const hintInput = document.getElementById('hintInput');
const hintSubmit = document.getElementById('hintSubmit');
const hintClose = document.getElementById('hintClose');
const hintReveal = document.getElementById('hintReveal');

/* state */
let currentStep = 1; // 1=ann,2=kiss,3=hug

/* ===== input mask: auto-insert slashes & accept pasted digits ===== */
function attachMask(el){
  el.addEventListener('input', () => {
    const raw = digitsOnly(el.value);
    el.value = formatDDMMYYYY(raw);
  });
  // allow only digits and control keys on keydown
  el.addEventListener('keydown', (e) => {
    if(e.ctrlKey || e.metaKey || ['Backspace','Delete','ArrowLeft','ArrowRight','Tab'].includes(e.key)) return;
    if(!/^[0-9]$/.test(e.key)) e.preventDefault();
  });
}
[ inputAnn, inputKiss, inputHug ].forEach(attachMask);

/* ===== show/hide steps helpers ===== */
function showStep(n){
  currentStep = n;
  // hide all
  [stepAnn, stepKiss, stepHug].forEach(s => { s.style.display = 'none'; s.setAttribute('aria-hidden','true'); });
  // show requested
  if(n===1){ stepAnn.style.display='flex'; stepAnn.setAttribute('aria-hidden','false'); inputAnn.focus(); backBtn.style.display='none'; nextBtn.textContent='Next'; }
  if(n===2){ stepKiss.style.display='flex'; stepKiss.setAttribute('aria-hidden','false'); inputKiss.focus(); backBtn.style.display='inline-block'; nextBtn.textContent='Next'; }
  if(n===3){ stepHug.style.display='flex'; stepHug.setAttribute('aria-hidden','false'); inputHug.focus(); backBtn.style.display='inline-block'; nextBtn.textContent='Finish'; }
  // hide hint by default
  hintBtn.style.display='none';
  // clear visible error for shown step
  clearErrors();
  // maybe show hint button if previous correct & this wrong (live)
  maybeShowHint();
}

/* clear errors */
function clearErrors(){ [errAnn,errKiss,errHug].forEach(e=>{ e.style.display='none'; e.textContent=''; }); }

/* check match for step */
function isMatchForStep(n){
  if(n===1) return digitsOnly(inputAnn.value) === CORRECT.anniversary;
  if(n===2) return digitsOnly(inputKiss.value) === CORRECT.kiss;
  if(n===3) return digitsOnly(inputHug.value) === CORRECT.hug;
  return false;
}

/* maybe show hint button logic:
   show hint button when previous steps are correct (or none), and current step has a wrong attempt (non-empty but not match)
*/
function maybeShowHint(){
  const annOk = digitsOnly(inputAnn.value).length===8 && digitsOnly(inputAnn.value) === CORRECT.anniversary;
  const kissOk = digitsOnly(inputKiss.value).length===8 && digitsOnly(inputKiss.value) === CORRECT.kiss;
  const hugOk  = digitsOnly(inputHug.value).length===8 && digitsOnly(inputHug.value) === CORRECT.hug;

  if(currentStep===1){
    const attempted = digitsOnly(inputAnn.value).length>0 && digitsOnly(inputAnn.value) !== CORRECT.anniversary;
    hintBtn.style.display = attempted ? 'inline-block' : 'none';
  } else if(currentStep===2){
    // only show if anniversary already correct and kiss attempted wrong
    const attempted = digitsOnly(inputKiss.value).length>0 && digitsOnly(inputKiss.value) !== CORRECT.kiss;
    hintBtn.style.display = (annOk && attempted) ? 'inline-block' : 'none';
  } else if(currentStep===3){
    const attempted = digitsOnly(inputHug.value).length>0 && digitsOnly(inputHug.value) !== CORRECT.hug;
    hintBtn.style.display = (annOk && kissOk && attempted) ? 'inline-block' : 'none';
  }
}

/* event listeners to show hint button while typing */
[ inputAnn, inputKiss, inputHug ].forEach(el => el.addEventListener('input', maybeShowHint));

/* Next button click: validate current step */
nextBtn.addEventListener('click', () => {
  clearErrors();
  if(currentStep === 1){
    if(isMatchForStep(1)){
      // reveal next
      revealStep(2);
    } else {
      // show single specific error
      errAnn.textContent = "Bubu‚Ä¶ how can you forget our anniversary? üò¢";
      errAnn.style.display = 'block';
      maybeShowHint();
    }
  } else if(currentStep === 2){
    if(isMatchForStep(2)){
      revealStep(3);
    } else {
      errKiss.textContent = "Tch tch‚Ä¶ did my kiss not fry your brain that day? ü§®";
      errKiss.style.display = 'block';
      maybeShowHint();
    }
  } else if(currentStep === 3){
    if(isMatchForStep(3)){
      // success: small celebration then redirect
      showSuccessAndRedirect();
    } else {
      errHug.textContent = "Ohooo, first hug bhi bhul gayi? ü´¢";
      errHug.style.display = 'block';
      maybeShowHint();
    }
  }
});

/* Back button */
backBtn.addEventListener('click', () => {
  if(currentStep>1) showStep(currentStep-1);
});

/* reveal step with a tiny fade/slide */
function revealStep(n){
  const target = n===2 ? stepKiss : stepHug;
  // show target for animation
  target.style.display='flex';
  target.style.opacity=0;
  target.style.transform='translateY(10px)';
  setTimeout(()=>{ target.style.opacity=1; target.style.transform='translateY(0)'; }, 20);
  showStep(n);
}

/* hint button opens modal with step-specific prompt */
hintBtn.addEventListener('click', () => {
  let sKey = currentStep===1 ? 'anniversary' : (currentStep===2 ? 'kiss' : 'hug');
  const cfg = HINTS[sKey];
  hintTitle.textContent = 'Answer to reveal a hint';
  hintPrompt.textContent = cfg.prompt;
  hintReveal.style.display='none';
  hintInput.value = '';
  hintModal.classList.add('show'); hintModal.setAttribute('aria-hidden','false');
});

/* submit hint answer */
hintSubmit.addEventListener('click', () => {
  const ans = (hintInput.value || '').trim();
  if(!ans){
    hintInput.style.border = '1px solid #e63a5a';
    return;
  }
  // store based on current step
  const sKey = currentStep===1 ? 'anniversary' : (currentStep===2 ? 'kiss' : 'hug');
  const cfg = HINTS[sKey];
  localStorage.setItem(cfg.storageKey, ans);
  hintReveal.textContent = cfg.reveal;
  hintReveal.style.display = 'block';
});

/* close hint modal */
hintClose.addEventListener('click', () => {
  hintModal.classList.remove('show'); hintModal.setAttribute('aria-hidden','true');
});

/* click outside to close */
hintModal.addEventListener('click', (e) => { if(e.target === hintModal){ hintModal.classList.remove('show'); hintModal.setAttribute('aria-hidden','true'); } });

/* success animation + redirect */
function showSuccessAndRedirect(){
  nextBtn.disabled = true;
  backBtn.style.display='none';
  hintBtn.style.display='none';
  const card = document.querySelector('.card');
  const success = document.createElement('div');
  success.className = 'success';
  success.innerHTML = '<h2>Unlocked ‚ù§Ô∏è</h2><div class="small">Taking you to the surprise...</div>';
  card.appendChild(success);
  // small delay then redirect
  setTimeout(()=>{ window.location.href = 'secret.html'; }, 1300);
}

/* on load show step 1 */
showStep(1);

/* keyboard: Enter triggers Next for accessibility */
document.addEventListener('keydown', (e) => {
  if(e.key === 'Enter'){
    // if modal open, treat Enter as submit hint
    if(hintModal.classList.contains('show')){
      hintSubmit.click();
    } else {
      nextBtn.click();
    }
  }
});

/* For Soham (you) ‚Äî how to read saved answers later:
   - Open browser devtools (Console) and run:
       localStorage.getItem('hint_anniversary')
       localStorage.getItem('hint_kiss')
       localStorage.getItem('hint_hug')
   Or I can add a tiny answers.html to show them if you want.
*/
</script>
</body>
</html>