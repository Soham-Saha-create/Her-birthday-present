<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>You — Photo Book</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    /* Reset */
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background: #faf5f2;
      font-family: 'Quicksand', sans-serif;
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 20px;
      overflow-x: hidden;
    }

    h1 {
      color: #e75480;
      font-size: 2.5rem;
      margin-bottom: 30px;
    }

    /* Book container */
    .book {
      width: 90vw;
      max-width: 900px;
      height: 520px;
      perspective: 2000px;
      position: relative;
    }

    /* Each page spread */
    .spread {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0; left: 0;
      transform-style: preserve-3d;
      transition: transform 1s ease;
    }

    /* Left and right pages */
    .page {
      width: 50%;
      height: 100%;
      background: #fff8f5;
      position: absolute;
      top: 0;
      border: 1px solid #dcd0c0;
      box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
      overflow: hidden;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      padding: 20px;
      backface-visibility: hidden;
    }
    .page img {
      width: 48%;
      height: 48%;
      object-fit: cover;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
    }
    .page img:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    }

    .left {
      left: 0;
      transform-origin: left center;
    }
    .right {
      left: 50%;
      transform-origin: left center;
    }

    /* When flipping forward, rotate entire spread */
    .flipped {
      transform: rotateY(-180deg);
    }

    /* Navigation buttons */
    .nav-buttons {
      margin-top: 30px;
      display: flex;
      gap: 30px;
      justify-content: center;
    }
    .nav-btn {
      background-color: #ffb6b9;
      color: white;
      border: none;
      border-radius: 30px;
      padding: 14px 30px;
      font-size: 1.1rem;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      transition: background-color 0.3s, transform 0.2s;
      user-select: none;
    }
    .nav-btn:hover:not(:disabled) {
      background-color: #ff9aa2;
      transform: translateY(-2px);
    }
    .nav-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    /* For mobile: smaller height */
    @media (max-width: 700px) {
      .book { height: 400px; }
    }
    @media (max-width: 450px) {
      .book { height: 350px; }
      .page img { width: 48%; height: 48%; }
    }
  </style>
</head>
<body>
  <h1>You — Photo Book</h1>

  <div class="book">
    <div class="spread" id="spread">
      <!-- Left Page -->
      <div class="page left" id="leftPage">
        <!-- 2 photos per side inserted here -->
      </div>
      <!-- Right Page -->
      <div class="page right" id="rightPage">
        <!-- 2 photos per side inserted here -->
      </div>
    </div>
  </div>

  <div class="nav-buttons">
    <button class="nav-btn" id="prevBtn" disabled>‹ Previous</button>
    <button class="nav-btn" id="nextBtn">Next ›</button>
  </div>

  <script>
    // 1. Replace these with your actual 80+ image URLs
    const images = [
      'media/you/photo1.jpg',  'media/you/photo2.jpg',  'media/you/photo3.jpg',  'media/you/photo4.jpg',
      'media/you/photo5.jpg',  'media/you/photo6.jpg',  'media/you/photo7.jpg',  'media/you/photo8.jpg',
      'media/you/photo9.jpg',  'media/you/photo10.jpg', 'media/you/photo11.jpg', 'media/you/photo12.jpg',
      'media/you/photo13.jpg', 'media/you/photo14.jpg', 'media/you/photo15.jpg', 'media/you/photo16.jpg',
      'media/you/photo17.jpg', 'media/you/photo18.jpg', 'media/you/photo19.jpg', 'media/you/photo20.jpg',
      'media/you/photo21.jpg', 'media/you/photo22.jpg', 'media/you/photo23.jpg', 'media/you/photo24.jpg',
      'media/you/photo25.jpg', 'media/you/photo26.jpg', 'media/you/photo27.jpg', 'media/you/photo28.jpg',
      'media/you/photo29.jpg', 'media/you/photo30.jpg', 'media/you/photo31.jpg', 'media/you/photo32.jpg',
      'media/you/photo33.jpg', 'media/you/photo34.jpg', 'media/you/photo35.jpg', 'media/you/photo36.jpg',
      'media/you/photo37.jpg', 'media/you/photo38.jpg', 'media/you/photo39.jpg', 'media/you/photo40.jpg',
      'media/you/photo41.jpg', 'media/you/photo42.jpg', 'media/you/photo43.jpg', 'media/you/photo44.jpg',
      'media/you/photo45.jpg', 'media/you/photo46.jpg', 'media/you/photo47.jpg', 'media/you/photo48.jpg',
      'media/you/photo49.jpg', 'media/you/photo50.jpg', 'media/you/photo51.jpg', 'media/you/photo52.jpg',
      'media/you/photo53.jpg', 'media/you/photo54.jpg', 'media/you/photo55.jpg', 'media/you/photo56.jpg',
      'media/you/photo57.jpg', 'media/you/photo58.jpg', 'media/you/photo59.jpg', 'media/you/photo60.jpg',
      'media/you/photo61.jpg', 'media/you/photo62.jpg', 'media/you/photo63.jpg', 'media/you/photo64.jpg',
      'media/you/photo65.jpg', 'media/you/photo66.jpg', 'media/you/photo67.jpg', 'media/you/photo68.jpg',
      'media/you/photo69.jpg', 'media/you/photo70.jpg', 'media/you/photo71.jpg', 'media/you/photo72.jpg',
      'media/you/photo73.jpg', 'media/you/photo74.jpg', 'media/you/photo75.jpg', 'media/you/photo76.jpg',
      'media/you/photo77.jpg', 'media/you/photo78.jpg', 'media/you/photo79.jpg', 'media/you/photo80.jpg'
    ];

    const photosPerSpread = 4; // 2 per page
    const totalSpreads = Math.ceil(images.length / photosPerSpread);
    let currentSpread = 0;

    // DOM refs
    const leftPage = document.getElementById('leftPage');
    const rightPage = document.getElementById('rightPage');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const spread = document.getElementById('spread');

    // Function to render one spread (4 images) onto pages
    function renderSpread(idx) {
      leftPage.innerHTML = '';
      rightPage.innerHTML = '';

      const startIndex = idx * photosPerSpread;
      const endIndex = Math.min(startIndex + photosPerSpread, images.length);
      const currentImages = images.slice(startIndex, endIndex);

      // Left page: images[0], images[1]
      for (let i = 0; i < 2; i++) {
        if (currentImages[i]) {
          const photoDiv = document.createElement('div');
          photoDiv.className = 'photo';
          photoDiv.innerHTML = `<img src="${currentImages[i]}" alt="Photo ${startIndex + i + 1}">`;
          // Random slight tilt
          const angle = (Math.random() * 6 - 3).toFixed(1);
          photoDiv.style.transform = `rotate(${angle}deg)`;
          leftPage.appendChild(photoDiv);
        }
      }

      // Right page: images[2], images[3]
      for (let i = 2; i < 4; i++) {
        if (currentImages[i]) {
          const photoDiv = document.createElement('div');
          photoDiv.className = 'photo';
          photoDiv.innerHTML = `<img src="${currentImages[i]}" alt="Photo ${startIndex + i + 1}">`;
          const angle = (Math.random() * 6 - 3).toFixed(1);
          photoDiv.style.transform = `rotate(${angle}deg)`;
          rightPage.appendChild(photoDiv);
        }
      }

      // Update button states
      prevBtn.disabled = (idx === 0);
      nextBtn.disabled = (idx === totalSpreads - 1);
    }

    // Flip animation logic
    function flipPage(direction) {
      if (direction === 'next' && currentSpread < totalSpreads - 1) {
        spread.classList.add('turning-left');
        setTimeout(() => {
          currentSpread++;
          renderSpread(currentSpread);
          spread.classList.remove('turning-left');
        }, 800);
      }
      else if (direction === 'prev' && currentSpread > 0) {
        spread.classList.add('turning-right');
        setTimeout(() => {
          currentSpread--;
          renderSpread(currentSpread);
          spread.classList.remove('turning-right');
        }, 800);
      }
    }

    prevBtn.addEventListener('click', () => flipPage('prev'));
    nextBtn.addEventListener('click', () => flipPage('next'));

    // Photo modal (fullscreen zoom)
    const photoModal = document.createElement('div');
    photoModal.id = 'photoModal';
    photoModal.innerHTML = `
      <span class="close-btn">&times;</span>
      <img src="" alt="Zoomed Photo" id="modalImg" />
    `;
    document.body.appendChild(photoModal);

    const modalImg = document.getElementById('modalImg');
    const closeModalBtn = photoModal.querySelector('.close-btn');

    function openModal(src) {
      modalImg.src = src;
      photoModal.classList.add('visible');
    }
    function closeModal() {
      photoModal.classList.remove('visible');
      modalImg.src = '';
    }

    // Attach click listeners to dynamic photo elements
    function attachPhotoListeners() {
      document.querySelectorAll('.photo img').forEach(img => {
        img.addEventListener('click', () => openModal(img.src));
      });
    }

    closeModalBtn.addEventListener('click', closeModal);
    photoModal.addEventListener('click', (e) => {
      if (e.target === photoModal) closeModal();
    });

    // Swipe support for mobile (left/right swipe)
    let startX = 0;
    spread.addEventListener('touchstart', (e) => {
      startX = e.changedTouches[0].screenX;
    });
    spread.addEventListener('touchend', (e) => {
      const endX = e.changedTouches[0].screenX;
      if (startX - endX > 50) flipPage('next');
      else if (endX - startX > 50) flipPage('prev');
    });

    // Initial render and listeners
    renderSpread(currentSpread);
    // Delay attaching photo listeners until after initial render
    setTimeout(attachPhotoListeners, 1000);
  </script>
</body>
</html>